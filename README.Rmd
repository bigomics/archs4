---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# Overview

The `archs4` package provides utility functions to query and explore the 
raw archs4 data files. These files need to have been downloaded locally on
the machine using this package and must all belong in a
`getOption("archs4.datadir")` directory.

# Installation

You first need to download the `human_matrix.h5` and `mouse_matrix.h5` and
put them into a single directory. The download directory needs to be set
in R such that `getOption("archs4.datadir")` returns the path to this
directory.

The default value for `getOption("archs4.datadir")` is `~/.archs4data`.

If you are developing this package and builidng the documentation, the
build happens in a vanilla R workspace, which won't set your R's `options`
if they are in your `~/.Rprofile`. In this case, symlink your archs4 data
directory such that `~/.archs4data` points to the directory you picked on
your machine.


# Usage

After downloading the necessary files, you can get sample information for
GEO series or sample identifiers like so:

```{r, message=FALSE, warning=FALSE}
library(archs4)

ids <- c('GSE89189', 'GSE29943', "GSM1095128", "GSM1095129", "GSM1095130")
sample.info <- archs4_sample_info(ids)
head(sample.info)
```

You can materialize a `DGEList` from a series of series and sample-level
identifiers, as well. For instance, to create a DGEList from the 
[Zhang et al. (Barres) transcriptome database][zhangpub]. You would identify its
GEO series identifier ("[GSE52564][zhanggeo]") and do this:

```{r}
y <- archs4::as.DGEList("GSE52564", feature_type = "gene")
```

That command loads a 31,553 gene by 17 sample DGEList, and takes about a second
to run on recent SSD-driven laptop.

[zhangpub]: http://www.jneurosci.org/content/34/36/11929.long
[zhanggeo]: https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE52564